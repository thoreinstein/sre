{"id":"sre-336","title":"sre timeline command fails with missing zsh-history.db","description":"~/src/thoreinstein/sre   main  2  4  ...........................................................................\n  sre timeline fraas-25257\nError: history database not available at: /Users/jimmyers/.histdb/zsh-history.db\nUsage:\n  sre timeline \u003cticket\u003e [flags]\n\nFlags:\n      --directory string   Filter by directory path\n      --failed-only        Show only failed commands (exit code != 0)\n  -h, --help               help for timeline\n      --limit int          Maximum number of commands to retrieve (default 1000)\n      --no-update          Don't update the ticket note, only output to console\n      --output string      Output file path (default: update ticket note)\n      --since string       Start time (YYYY-MM-DD HH:MM or YYYY-MM-DD)\n      --until string       End time (YYYY-MM-DD HH:MM or YYYY-MM-DD)\n\nGlobal Flags:\n      --config string   config file (default is $HOME/.config/sre/config.toml)\n  -v, --verbose         verbose output\n","status":"open","priority":0,"issue_type":"bug","created_at":"2026-01-06T08:28:07.941501-05:00","created_by":"jimmyers","updated_at":"2026-01-06T08:28:27.704682-05:00"}
{"id":"sre-3wc","title":"The tests should clean up created tmux sessions when complete","description":"The unit tests currently create several new tmux sessions when running locally. They should capture the currently attached session, run the tests, then reattach to the previously attached session, then delete the test sessionns.\n","status":"in_progress","priority":1,"issue_type":"chore","created_at":"2026-01-06T08:22:43.890192-05:00","created_by":"jimmyers","updated_at":"2026-01-06T08:29:20.487068-05:00"}
{"id":"sre-hui","title":"The command  is improperly named","description":"Rename the sre init command to be sre work, as in \"sre work on ticket \u003carg\u003e\"\n","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-29T09:04:03.482029-05:00","created_by":"jimmyers","updated_at":"2026-01-06T08:22:30.510173-05:00","closed_at":"2026-01-06T08:22:30.510173-05:00","close_reason":"Renamed 'sre init' command to 'sre work' - commit c61089f"}
{"id":"sre-vqn","title":"Auto-repair missing fetch refspec in bare repos","description":"## Problem\n\nThe sre tool's `WorktreeManager` runs `git fetch origin` in `fetchAndPull()` (worktree.go:225), but this has no effect on bare repos that are missing the fetch refspec. This causes `git push --force-with-lease` to fail with \"stale info\" errors.\n\nBare repos cloned without a fetch refspec don't create/update `refs/remotes/origin/*` when fetching, which breaks `--force-with-lease` comparisons.\n\n## Fix\n\nAdd an `ensureRemoteConfig()` function that checks for and adds the fetch refspec if missing:\n\n```go\n// ensureRemoteConfig ensures the remote origin has a fetch refspec configured\n// This is needed for bare repos that were cloned without one\nfunc (wm *WorktreeManager) ensureRemoteConfig(repoRoot string) error {\n    output, err := wm.runner.Output(repoRoot, \"git\", \"config\", \"--get\", \"remote.origin.fetch\")\n    if err != nil || strings.TrimSpace(string(output)) == \"\" {\n        if wm.Verbose {\n            fmt.Println(\"Adding missing fetch refspec to remote origin...\")\n        }\n        if err := wm.runner.Run(repoRoot, \"git\", \"config\", \"remote.origin.fetch\", \"+refs/heads/*:refs/remotes/origin/*\"); err != nil {\n            return errors.Wrap(err, \"failed to configure fetch refspec\")\n        }\n    }\n    return nil\n}\n```\n\nCall this from `CreateWorktree()` before `fetchAndPull()`, or at the start of `fetchAndPull()` itself.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-06T07:52:00.369193-05:00","created_by":"jimmyers","updated_at":"2026-01-06T08:06:01.468128-05:00","closed_at":"2026-01-06T08:06:01.468128-05:00","close_reason":"Implemented ensureFetchRefspec() to auto-repair missing fetch refspec in bare repos. Committed as 40ead95."}
